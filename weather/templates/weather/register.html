{% extends 'base.html' %}
{% load static %}

{% block title %}Météo France - Création de compte{% endblock title %}

{% block extra_css %}
<style>
    .page-background {
        background-image: url("{% static 'images/login-bg.jpg' %}");
        background-size: cover;
        background-position: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .htmx-indicator {
        display: none;
    }
    .htmx-request .htmx-indicator {
        display: inline-block;
    }
</style>
{% endblock extra_css %}

{% block content %}
<div class="page-background"></div>
<p>coucou lol</p>
<form
hx-post="{% url 'weather:login' %}"
hx-target="#login-messages"
hx-swap="innerHTML"
hx-indicator="#login-spinner"
hx-trigger="submit"
hx-on::after-request="if(event.detail.successful) { window.location.href = '{% url 'weather:home' %}'; }">

{% csrf_token %}

<div class="form-control">
<label class="label">
    <span class="label-text">Nom d'utilisateur</span>
</label>
<input type="text" name="username" placeholder="Nom d'utilisateur" class="input input-bordered" required />
</div>

<div class="form-control">
<label class="label">
    <span class="label-text">Mot de passe</span>
</label>
<input type="password" name="password" placeholder="Mot de passe" class="input input-bordered" required />
</div>

<div class="form-control mt-6">
<button type="submit" class="btn btn-primary">
    <span id="login-spinner" class="htmx-indicator loading loading-spinner loading-xs mr-2"></span>
    Connexion
</button>
</div>
</form>
{% endblock content %}